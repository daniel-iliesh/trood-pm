<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Page Not Found - Redirecting...</title>
        <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <style>
            body {
                font-family: "Inter", sans-serif;
            }
        </style>
        <script type="text/javascript">
            // This script runs when GitHub Pages serves 404.html
            // It redirects to index.html, passing the original path as a query parameter.

            // Get the base path from the current URL (e.g., "/trood-pm/")
            // This handles both user/org pages and project pages.
            function getBasePath() {
                // If it's a user/organization page (e.g., myuser.github.io)
                if (
                    window.location.hostname.endsWith("github.io") &&
                    window.location.pathname === "/"
                ) {
                    return "/";
                }

                // For project pages (e.g., myuser.github.io/my-repo/)
                // The first segment of the pathname is typically the repository name
                const pathSegments = window.location.pathname.split("/");
                const repoName = pathSegments.filter(
                    (segment) => segment !== "",
                )[0];

                if (repoName) {
                    return `/${repoName}/`;
                }

                return "/"; // Fallback
            }

            const basePath = getBasePath();
            const currentPath = window.location.pathname;
            const currentSearch = window.location.search;
            const currentHash = window.location.hash;

            // Construct the new URL for redirection
            // Example: /trood-pm/about?param=value#section
            // Becomes: /trood-pm/index.html?p=/about&param=value#section
            // The 'p' query parameter will hold the original path
            const originalPathWithoutBase = currentPath.replace(basePath, "");
            const redirectTarget = `${basePath}index.html?p=${encodeURIComponent(originalPathWithoutBase)}${currentSearch}${currentHash}`;

            // Perform the redirect
            window.location.replace(redirectTarget);
        </script>
    </head>
    <body class="bg-gray-100 flex items-center justify-center min-h-screen">
        <div class="bg-white p-8 rounded-lg shadow-lg text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">
                Page Not Found
            </h1>
            <p class="text-gray-600">Redirecting to the application...</p>
            <div class="mt-4 animate-pulse text-blue-500">Loading...</div>
        </div>
    </body>
</html>
